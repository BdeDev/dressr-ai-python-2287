{% include "admin-includes/header.html" %}{% load static %}
<div class="page-wrapper">
    <div class="content">
        <div class="page-header">
            <div class="page-title">
                <h4>Wardrobe </h4>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item"><a class="white-text" href="{% url 'frontend:index' %}">Dashboard</a></li>
                        <li class="breadcrumb-item"><a class="white-text" href="{% url 'wardrobe:wardrobe_list' %}">Wardrobs</a></li>
                        <li class="breadcrumb-item active">Wardrobe Information</li>
                    </ol>
                </nav>
            </div>
            <div class="page-btn d-flex flex-wrap">
                <a class="btn btn-primary me-2" href="{% url 'wardrobe:view_item_wear_calender' wardrobe.id %}" ><i class="fas fa-calendar-alt me-1"></i> Calender</a>
                <a class="btn btn-secondary" href="{% url 'wardrobe:wardrobe_list' %}"><i class="fa fa-angle-left me-1"></i> Back</a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 col-lg-12 col-sm-12">
                <div class="card my-4">
                    <div class="card-body">
                        <div class="row">
                        <div class=" col-md-6  productdetails">
                            <ul class="product-bar mb-2">
                                <li>
                                    <h4>Id </h4>
                                    <h6>{{wardrobe.id}}</h6>
                                </li>
                                <li>
                                    <h4> Name </h4>
                                    <h6>{{wardrobe.name|default:"-"}}</h6>
                                </li>
                                <li>
                                    <h4>User</h4>
                                    <h6>
                                        <div class="d-flex align-items-center display-images">
                                            {% if wardrobe.user.profile_pic %}
                                                <a href="{{wardrobe.user.profile_pic.url}}" data-fancybox>
                                                    <img src="{{wardrobe.user.profile_pic.url}}" class="rounded-lg me-2" width="50" alt="">
                                                </a>
                                            {% else %}
                                                <a href="{% static 'admin-assets/images/dp.png' %}" data-fancybox>
                                                    <img src="{% static 'admin-assets/images/dp.png' %}"
                                                    class="rounded-lg me-2" width="50" alt="">
                                                </a>
                                            {% endif %}
                                            <span ><a href="{% url 'users:view_user' wardrobe.user.id %}" class="w-100">{{wardrobe.user.full_name|capfirst}}</a></span>
                                        </div>
                                    </h6>
                                </li>
                            </ul>
                        </div>
                        <div class=" col-md-6  productdetails">
                            <ul class="product-bar mb-2">
                                <li>
                                    <h4>Is Shared</h4>
                                    <h6>
                                        {% if wardrobe.is_shared %}
                                        <span class="badge bg-primary">Yes</span>
                                        {% else %}
                                        <span class="badge bg-warning">No</span>
                                        {% endif %}
                                    </h6>
                                </li>
                                <li>
                                    <h4>Created On </h4>
                                    <h6>
                                        <script>
                                            var date = ConvertDateTime("{{ wardrobe.created_on|date:'Y-m-d' }}", "{{ wardrobe.created_on|time:'H:i' }}");
                                            document.write(date);
                                        </script>
                                    </h6>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row gap-3">
                <div class="card-body" id="card_body_div">
                    <div class="scroll-row">
                        <div class="row flex-nowrap gap-3">
                            {% for item in cloth_items %}
                                <div class="card" style="width: 18rem;">
                                    {% if item.image %}
                                    <a href="{{ item.image.url }}" data-fancybox>
                                        <img src="{{ item.image.url }}" style="height:250px !important;" class="card-img-top" alt="">
                                    </a>
                                    <a title="View" data-bs-toggle="modal" onclick="GetValue('{{item.id}}','{{item.title}}','{{item.cloth_category.title}}','{{item.weather_type}}','{{item.color}}','{{item.brand}}','{{item.occasion.title}}','{{item.image.url}}','{{item.created_on|date:"Y-m-d"}}T{{item.created_on|date:"H:i"}}')"  data-bs-target="#view-details">
                                    {% endif %}
                                    <div class="card-body">
                                        <h5 class="card-title">{{item.title|default:"-"}}</h5>
                                        <p class="card-text">{{item.cloth_category.title|default:"-"}}</p>
                                    </div>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="view-details"  data-bs-backdrop='static' data-bs-keyboard='false' tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            {% comment %} <div class="modal-header">
                <h4 class="modal-title">Item Detail View</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div> {% endcomment %}
            <div class="modal-body">
                <div class="basic-form">
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-sm-12">
                            <button type="button" class="btn-close d-flex justify-content-end align-items-center" data-bs-dismiss="modal" aria-label="Close"></button>    
                            <div class="card my-4">
                                <div class="card-body">
                                    <div class="row">
                                    <div class=" col-md-6  productdetails">
                                        <h5><b>Item Detail</b></h5>
                                        <ul class="product-bar mb-2">
                                            <li>
                                                <h4>Id </h4>
                                                <h6><span id="item_id"></span></h6>
                                            </li>
                                            <li>
                                                <h4> Title </h4>
                                                <h6><span id="item_title"></span></h6>
                                            </li>
                                            <li>
                                                <h4> Category </h4>
                                                <h6><span id="item_category"></span></h6>
                                            </li>
                                            {% comment %} <li>
                                                <h4> Weather Type </h4>
                                                <h6><span id="weather_type"></span></h6>
                                            </li> {% endcomment %}
                                            <li>
                                                <h4> Colour </h4>
                                                <h6><span id="item_color"></span></h6>
                                            </li>
                                            <li>
                                                <h4> Brand </h4>
                                                <h6><span id="item_brand"></span></h6>
                                            </li>
                                            <li>
                                                <h4> Occasion </h4>
                                                <h6><span id="item_occasion"></span></h6>
                                            </li>
                                            <li>
                                                <h4>Created On </h4>
                                                <h6>
                                                    <span id="item_addedd_on"> </span>
                                                </h6>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6 productdetails">
                                        <h5><b>Item Image</b></h5>
                                        <ul class="product-bar mb-2">
                                            <li>
                                            <a id="item_image_link" data-fancybox>
                                                <img id="item_image_img"  alt="">
                                            </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% include "admin-includes/footer.html" %}

<script>
	function GetValue(id, title,cloth_category,weather_type,color,brand,occasion,image,created_on){
    $('#item_id').text(id);
    $('#item_title').text(title);
    $('#item_category').text(cloth_category);
    $('#weather_type').text(weather_type);
    $('#item_color').text(color);
    $('#item_brand').text(brand);
    $('#item_occasion').text(occasion);
    $('#item_image_img').attr('src', image);
    $('#item_image_link').attr('href', image);
    $('#item_addedd_on').text(moment.utc(created_on).local().format("D MMMM YYYY, LT"));
}
</script>
<style>
    .scroll-row {
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 10px;
    }
    .scroll-row .card {
        display: inline-block;
        margin-right: 15px;
        white-space: normal;
    }

    /* Optional: hide scrollbar on Chrome/Edge */
    .scroll-row::-webkit-scrollbar {
        height: 6px;
    }

    .modal-lg, .modal-xl {
        max-width: 1000px !important;
    }
</style>