{% include 'registration/includes/new-header.html' %}{% load static %}{% load extras %}

<section class="login-outr d-flex align-items-center">
  <div class="container">
    <div class="login-box row align-items-center">
      <div class="align-self-center col-lg-6 col-mg-12 p-0 order-1 order-lg-2">
        <div class="form-section align-self-center">
          <div class="auth-logo text-center">
            <a class="auth-logo-inr" href="/">
               <img src="{% static 'admin-assets/images/logo-wht.svg' %}" />
            </a>
            <h4 class="mt-2 text-white mb-2">Reset Password</h4>
            <h6 class="mt-0 text-white mb-4">Your password must consist of atleast 8-20 characters including numbers and a special character, and must not contain spaces and emojis.</h6>
          </div>
          <form class="common-form" onsubmit="Loader(this.id)" id="reset-password" method="POST" novalidate="novalidate">
              {% csrf_token %}
             <div class="mb-4">
                <label for="password" class="form-label text-white">Password <span class="text-danger">*</span></label>
               <div class="position-relative pass-group">                                            
                  <input type="password" class="form-control" id="password" name="password" autocomplete="on" placeholder="Enter your password" maxlength="30">
                  <span onclick="changetype(this)" class="fas fa-eye-slash toggle-password"></span>
              </div>
            </div>
            <button type="submit" class="w-100 common-black-btn">Reset Password</button>
          </form>
        </div>
      </div>
      <div class="col-lg-6 col-mg-12 p-0">
        <div class="info clearfix">
          <div class="box">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <div class="content">
              <h3>Welcome to My Dresser</h3>
              <p>Your wardrobe, smarter than ever. From digitizing your closet to
                AI-powered styling, Dressr transforms how you choose what to wear.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<div class="auth-ftr">
    <div class="container">
        <p class="mb-0 copy-right text-center text-black">
            Â© 2025 My Dresser. All rights reserved. Developed By
            <a href="https://toxsl.com/" target="_blank">
            ToXSL Technologies.</a>
        </p>
    </div>
</div>


{% include 'registration/includes/footer.html' %}



<script>
$(document).ready(function () {
  
  function changetype(icon) {
    const passwordInput = document.getElementById("password");

    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    } else {
      passwordInput.type = "password";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    }
  }
  
  // ðŸ§© Add custom password strength rule
  $.validator.addMethod("strongpassword", function (value, element) {
    return (
      this.optional(element) ||
      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#\$%\^&\*])(?=\S+$)[A-Za-z\d!@#\$%\^&\*]{8,20}$/.test(value)
    );
  }, "Password must include upper, lower, number, special character, and no spaces.");

  // ðŸ§¾ Initialize jQuery Validation
  $("#rest-password").validate({
    rules: {
      password: {
        required: true,
        minlength: 8,
        maxlength: 20,
        strongpassword: true,
      },
    },
    messages: {
      password: {
        required: "Please enter your password",
        minlength: "At least 8 characters required",
        maxlength: "At most 20 characters only",
        strongpassword: "Password must include upper, lower, number, special character, and no spaces.",
      },
    },
    errorPlacement: function (error, element) {
      error.addClass("text-red-500 text-sm mt-1 block");
      error.insertAfter(element);
    },
    highlight: function (element) {
      $(element).addClass("border-red-500");
    },
    unhighlight: function (element) {
      $(element).removeClass("border-red-500");
    }
  });
});
</script>