{% include "admin-includes/header.html" %}
{% load static %}{% load extras %}{% load humanize %}
<div class="page-wrapper">
    <div class="content">
        <div class="page-header">
            <div class="page-title">
                <h4>User Rating </h4>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a class="white-text" href="/">Dashboard</a></li>
                        <li class="breadcrumb-item"><a class="white-text" href="{% url 'users:users_list' %}">Customers</a></li>
                        <li class="breadcrumb-item"><a class="white-text" href="{% url 'users:view_user' user.id %}">Profile</a></li>
                        <li class="breadcrumb-item active">Notifications</li>
                    </ol>
                </nav>
            </div>
            <div class="page-btn d-flex flex-wrap">
                <a class="btn btn-secondary" href="{% url 'wardrobe:wardrobe_list' %}"><i class="fa fa-angle-left me-1"></i> Back</a>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 productdetails">
                                <ul class="product-bar">
                                    <li>
                                        <h4>Item Id </h4>
                                        <h6>{% if item_id.id %}{{item_id.id}}{% else %}-{% endif %}</h6>
                                    </li>
                                    <li>
                                        <h4>Title </h4>
                                        <h6>
                                            <div class="d-flex align-items-center display-images">
                                                {% if item_id.image.profile_pic %}
                                                    <a href="{{item_id.image.url}}" data-fancybox>
                                                        <img src="{{item_id.image.url}}" class="rounded-lg me-2" width="50" alt="">
                                                    </a>
                                                {% else %}
                                                    <a href="{% static 'admin-assets/images/dp.png' %}" data-fancybox>
                                                        <img src="{% static 'admin-assets/images/dp.png' %}"
                                                        class="rounded-lg me-2" width="50" alt="">
                                                    </a>
                                                {% endif %}
                                                <span> <a class="w-100" href="{% url 'wardrobe:view_wardrobe' item_id.wardrobe.id %}">{{item_id.title|capfirst}}</a></span>
                                            </div>
                                        </h6>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6 productdetails">
                                <ul class="product-bar">
                                    <li>
                                        <h4>Item Category </h4>
                                        <h6>
                                            {{item_id.cloth_category.title|capfirst}}
                                        </h6>
                                    </li>
                                    <li>
                                        <h4>Created By </h4>
                                        <h6>
                                            {% if item_id.wardrobe.user %}
                                            <div class="d-flex align-items-center display-images">
                                                {% if item_id.wardrobe.user.profile_pic %}
                                                    <a href="{{item_id.wardrobe.user.profile_pic.url}}" data-fancybox>
                                                        <img src="{{item_id.wardrobe.user.profile_pic.url}}" class="rounded-lg me-2" width="50" alt="">
                                                    </a>
                                                {% else %}
                                                    <a href="{% static 'admin-assets/images/dp.png' %}" data-fancybox>
                                                        <img src="{% static 'admin-assets/images/dp.png' %}"
                                                        class="rounded-lg me-2" width="50" alt="">
                                                    </a>
                                                {% endif %}
                                                <span><a class="w-100" href="{% url 'users:view_user' item_id.wardrobe.user.id %}">{{item_id.wardrobe.user.full_name|capfirst}}</a></span>
                                            </div>
                                            {% else %}-{% endif %}
                                        </h6>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="activity mt-3">
            <div class="activity-box">
                <div class='d-flex flex-wrap justify-content-between'>
                    <!-- showing_objects-->
                    {% include "admin-includes/showing_objects.html" with listing_objects=ratings %}
                    <!-- showing_objects end-->
                </div>
                <ul class="activity-list">
                    {% for rating in ratings %}
                    <li class="d-flex">
                        <div class="activity-user">
                            {% if rating.user.profile_pic %}
                            <img alt="Lesley Grauer" src="{{rating.user.profile_pic.url}}" class=" img-fluid">
                            {% else %}
                            <img alt="Lesley Grauer" src="{% static 'admin-assets/images/dp.png' %}" class=" img-fluid">
                            {% endif %}
                        </div>
                        <div class="activity-content">
                            <span class=" d-flex" style="flex-direction: column;">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        {% for i in "12345" %}
                                            {% if forloop.counter <= rating.rating %}
                                                <i class="fa fa-star" style="color: #FFD700;"></i>   <!-- Filled star -->
                                            {% else %}
                                                <i class="fa fa-star" style="color: #b8b3b3ff;"></i>   <!-- Empty star -->
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                    <div class="activity-right-content d-flex gap-2">
                                        <span ><a style="color:#1b378f;" href="{% url "users:view_user" rating.user.id %}">{{ rating.user.full_name|capfirst }}</a></span>
                                        <span>| 
                                            {{ rating.created_on|naturaltime }}
                                        </span>
                                    </div>
                                </div>
                                <div class="description">
                                    <p style="margin-bottom:0 !important">{{rating.comment|safe}}</p>
                                </div>
                            </span>
                        </div>
                    </li>
                    {% empty %}
                    <ul class="activity-list">
                        <li class="no-activity">
                            <div class="activity-content">No Data Found</div>
                        </li>
                    </ul>
                    {% endfor %}
                </ul>
                <!-- pagination-->
                {% include "admin-includes/pagination.html" with listing_objects=ratings %}
                <!-- pagination end-->
            </div>
        </div>
    </div>
</div>
{% include "admin-includes/footer.html" %}
<script>
    function goBack(){
        window.history.back()
    }
</script>
